<!DOCTYPE html>
<html>

  <head>
    <title>clone.js</title>
    
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Clonejs : The true prototype-based JavaScript micro-framework." />
    
    <link rel="stylesheet" href="http://yandex.st/highlightjs/7.3/styles/tomorrow.min.css">
    <script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>
    
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
    <style>
        NAV {
            color: rgb(128, 128, 128);
            position: absolute;
            z-index: 11;
            margin-top: 5px;
        }
        NAV A {color: white}
        NAV A:hover {color:#007edf}
        #downloads{
            width: 603px;
            background-position-x: 400px;
        }
        #downloads .version{
            float: right;
            color: grey;
            font-style: italic;
            margin-top: 40px;
            margin-right: 15px;
        }
        #main_content IMG {width: auto; height: auto}
        #main_content H2 IMG {float: right}
        #main_content PRE CODE {padding: 0px}
    </style>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">

          
                    
          <a id="forkme_banner" href="https://github.com/quadroid/clonejs">View on GitHub</a>

          <h1 id="project_title">CloneJS</h1>
          <h2 id="project_tagline">The true prototype-based lazy programming framework.</h2>
          
            <nav>
                  <a href="./symbols/clone.html">API documentation</a>
                | <a href="https://github.com/quadroid/clonejs/blob/master/CHANGELOG.md">ChangeLog</a>
                | <a href="http://github.com/quadroid/clonejs">GitHub</a>
                | <a href="http://npmjs.org/package/clonejs">NPM</a>
                | <a href="http://travis-ci.org/quadroid/clonejs">Travis CI</a>
            </nav>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/quadroid/clonejs/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/quadroid/clonejs/tarball/master">Download this project as a tar.gz file</a>
              <span class="version">
                 v1.3.2-alpha              </span>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">

        <script>
        if( window.location.protocol == 'file:' ){
            var src = '../../test/conf/nodeunit-browser.html';
            document.write('\
                <h6 style="margin: 0px"><a href="'+src+'">Unit testing...</a></h6> \
                <iframe id="unitTests" src="'+src+'" style="width:100%; height:32em"></iframe> \
            ');
        };
        </script>
        
        <p></p>

<p><strong>This framework provides:</strong></p>

<ul><li>Speed! It&#39;s extremely fast! <a href="http://jsperf.com/object-properties-init/4">Faster than JS core!</a> (class-objects creation).</li><li>Class-less, the pure prototype-based paradigm.</li><li><a target="_blank" href="http://martinfowler.com/bliki/LazyInitialization.html">Lazy initialization⠙</a> support (by <a href="./symbols/clone.Behavior.html#.$inits">$inits</a> behavior).</li><li>Separation of all your objects into the state (data) and behavior (methods),<br/>as in ECMA Script 6: classes does not have fields, only methods.</li><li>IE6 support! + Emulation of <code>Object.getPrototypeOf</code> (partial) and <code>Object.create</code>.</li></ul>

<h4>What is the clone?</h4>

<p><a href="./symbols/clone.html#clone"><code>clone()</code></a> function produces new objects — clones.<br/><strong>clone — this is the lazy shallow copy</strong>, i.e., it is actually not a copy, it&#39;s just a reference to the object,
with one difference: if you will add/replace any of its properties, it would not affect the cloned object (prototype).<br/>All JavaScript objects are clones of <code>Object.prototype</code> (except itself and objects, created by <code>Object.create(null)</code>).</p>

<h4>Try the true <a target="_blank" href="http://en.wikipedia.org/wiki/Prototype-based_programming">prototype-based OOP⠙</a></h4>

<p>In this framework you can easilly create and manipulate objects without constructors, instead of classic js way,
where you should define a constructor for every object (that you want to use as prototype), even if you didn&#39;t need it.
It&#39;s possible to build and maintain extremely <strong>large numbers of &quot;classes&quot; with comparatively little code</strong>.</p>

<p><strong>It&#39;s trivial to create new &quot;classes&quot;</strong> - just clone the object and change a couple of properties and voila... new &quot;class&quot;.</p>

<p><strong>It&#39;s really class-free</strong>: <a href="./symbols/clone.html#clone"><code>clone()</code></a> produces objects (prototypes), not function-constructors, unlike all other class-producing tools (<code>Ext.define</code>, <code>dojo.declare</code> etc).</p>

<p>Read more:</p>

<ul><li><a target="_blank" href="http://programmers.stackexchange.com/questions/110936/what-are-the-advantages-of-prototype-based-oop-over-class-based-oop#answers-header">Advantages of prototype-based OOP⠙</a></li><li><a target="_blank" href="http://www.2ality.com/2011/11/javascript-classes.html">Myth: JavaScript needs classes⠙</a></li><li><a target="_blank" href="http://translate.google.com/translate?hl=&amp;sl=ru&amp;tl=en&amp;u=http%3A%2F%2Fhabrahabr.ru%2Fpost%2F175029%2F">Does JavaScript need classes? (robot translation, sorry)⠙</a></li></ul>

<h3>Installation</h3>

<p>Node.js:</p>

<pre><code>npm install clonejs</code></pre>

<p><a target="_blank" href="http://code.lancepollard.com/github-as-a-cdn/">CDN⠙</a> for client-side:</p>

<pre><code>&lt;script src=&quot;http://quadroid.github.io/clonejs/cdn/clone.min.js&quot;&gt;&lt;/script&gt;</code></pre>

<h3>Usage</h3>

<pre><code>var clone = require(&#39;clonejs&#39;);//&lt;/node.js&gt;

/// Forget about classes.    
//  Instead of creating class (function), create prototype (object):

var duck$ = { // $ postfix means prototype: Duck.prototype === duck$
    quack: function(){
        console.log( this.name +&quot; Duck: Quack-quack!&quot;);
    }
};

/// Inheritance is simple (talkingDuck prototype extends duck prototype):

var talkingDuck$ = clone.extend( duck$, {
    quack: function(){
        duck$.quack.call(this);
        console.log(&quot;My name is &quot;+ this.name +&quot;!&quot;);
    }
});

/// Forget about the `new` operator, use `clone` function to create instances:

var donald = clone( talkingDuck$, {name: &quot;Donald&quot;});
donald.quack();// Donald Duck: Quack-quack! 
               // My name is Donald!
var daffy  = clone( talkingDuck$, {name: &quot;Daffy&quot;});
daffy.quack(); // Daffy Duck: Quack-quack! 
               // My name is Daffy!

/// Forget about the `instanceof` operator, use JS native 
//  .isPrototypeOf() method instead:

duck$.isPrototypeOf(donald);// true</code></pre>

<h5>Object-oriented notation:</h5>

<pre><code>  var duck$ = clone.extend({
      quack: function(){
          console.log( this.name +&quot; Duck: Quack-quack!&quot;);
      }
  });

  var talkingDuck$ = duck$.$extend({
      quack: function(){
          duck$.quack.call(this);
          console.log(&quot;My name is &quot;+ this.name +&quot;!&quot;);
      }
  });

  var donald = talkingDuck$.$clone({name: &quot;Donald&quot;});
  var daffy  = talkingDuck$.$clone({name: &quot;Daffy&quot;});</code></pre>

<h4>Lazy initialization</h4>

<p>How to initialize object without constructor?<br/>Lazy initialization is the tactic of delaying the calculation of a value until the first time it is needed.</p>

<pre><code>var obj = clone.new({
    name: &quot;object&quot;
    },{
    $inits: {
        lazy: function(){
            console.log(&quot;Lazy initialization...&quot;);
            return this.name +&quot; lazy initiated.&quot;:
        }
    }
});

console.log( &quot;obj.lazy: &quot; + obj.lazy );
// Lazy initialization...
// obj.lazy: object lazy initiated.

console.log( &quot;obj.lazy: &quot; + obj.lazy );// initializer does&#39;t run again
// obj.lazy: object lazy initiated.</code></pre>

<p>This code will work on IE8-, but you need to remember:</p>

<h6>Internet Explorer 8– obsticles</h6>

<p>Your accessor function <strong>should not return</strong> <code>null</code> or <code>undefined</code>.<br/><strong>If accessor returns boolean</strong>, you need to compare it with <code>true</code> or <code>false</code> obviously:</p>

<pre><code>if( obj.lazyBoolean == true   ) console.log(true);
// or
if( obj.lazyBoolean.valueOf() ) console.log(true);</code></pre>

<p><strong>If accessor returns object</strong>, you need to call <code>valueOf()</code> method:</p>

<pre><code>console.log( obj.lazyObject.valueOf().name );

// for info, this will works without errors/warnings on all browsers:
console.log( ({name: &quot;obj.property&quot; }).valueOf().name );// obj.property
console.log( (function(){return &quot;fn&quot;}).valueOf()()    );// fn
console.log( (777).valueOf() );// 777
console.log( &quot;str&quot;.valueOf() );// str
console.log( false.valueOf() );// false
// but this will throw error:
console.log( (undefined).valueOf() );
console.log(      (null).valueOf() );</code></pre>

<p>You can call <code>valueOf()</code> method only on first access. <br/><strong>If accessor returns primitive value</strong> (string, number, boolean), you can use it as normal.<br/>JavaScript automatically invokes <code>valueOf()</code> in places where a primitive value is expected.</p>

<h5>For more details, see <a href="./symbols/clone.html">API documentation</a></h5>

<p></p>
          
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">CloneJS maintained by <a href="https://github.com/quadroid">Alex Shvets</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

  </body>
  <script>
  window.onload = function(){
      Array.prototype.forEach.call( document.querySelectorAll('PRE > CODE'), function(el){
          //el.className = 'language-javascript';
          hljs.highlightBlock(el, null, false);
      });
      //hljs.initHighlighting();
  }
  </script>

  <!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter20738752 = new Ya.Metrika({id:20738752,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true,
                    trackHash:true});
            } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/20738752" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-1886659-9', 'clonejs.org');
    ga('send', 'pageview');
</script>  
</html>